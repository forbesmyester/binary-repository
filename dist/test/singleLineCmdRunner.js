"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const CmdRunner_1 = require("../src/CmdRunner");
const singleLineCmdRunner_1 = require("../src/singleLineCmdRunner");
const ava_1 = require("ava");
ava_1.default.cb('Can do basic test', (tst) => {
    let cmdSpawner = CmdRunner_1.CmdRunner.getCmdSpawner({});
    let f = singleLineCmdRunner_1.singleLineCmdRunner({ cmdSpawner }, "echo", /^Hello\s+(.*)/);
    f("Hello Matt", (err, result) => {
        tst.is(err, null);
        tst.is(result, "Matt");
        tst.end();
    });
});
ava_1.default.cb('Can fail', (tst) => {
    let cmdSpawner = CmdRunner_1.CmdRunner.getCmdSpawner({});
    let re = /^Hello\s+(.*)/;
    let f = singleLineCmdRunner_1.singleLineCmdRunner({ cmdSpawner }, "echo", re);
    f("Hi Matt", (err, result) => {
        tst.is(err.message, 'No lines matching \'^Hello\\s+(.*)\' found');
        tst.is(err.re, re);
        tst.deepEqual(err.output, [{ name: 'stdout', text: 'Hi Matt' }]);
        tst.is(result, undefined);
        tst.end();
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2luZ2xlTGluZUNtZFJ1bm5lci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3Rlc3Qvc2luZ2xlTGluZUNtZFJ1bm5lci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGdEQUE2QztBQUM3QyxvRUFBNEY7QUFDNUYsNkJBQXVCO0FBRXZCLGFBQUksQ0FBQyxFQUFFLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRTtJQUNqQyxJQUFJLFVBQVUsR0FBRyxxQkFBUyxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUM3QyxJQUFJLENBQUMsR0FBRyx5Q0FBbUIsQ0FBQyxFQUFDLFVBQVUsRUFBQyxFQUFFLE1BQU0sRUFBRSxlQUFlLENBQUMsQ0FBQztJQUNuRSxDQUFDLENBQUMsWUFBWSxFQUFFLENBQUMsR0FBRyxFQUFFLE1BQU0sRUFBRSxFQUFFO1FBQzVCLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ2xCLEdBQUcsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ3ZCLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUNkLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUM7QUFFSCxhQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFO0lBQ3hCLElBQUksVUFBVSxHQUFHLHFCQUFTLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzdDLElBQUksRUFBRSxHQUFHLGVBQWUsQ0FBQztJQUN6QixJQUFJLENBQUMsR0FBRyx5Q0FBbUIsQ0FBQyxFQUFDLFVBQVUsRUFBQyxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQztJQUN0RCxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsR0FBRyxFQUFFLE1BQU0sRUFBRSxFQUFFO1FBQ3pCLEdBQUcsQ0FBQyxFQUFFLENBQzBCLEdBQUksQ0FBQyxPQUFPLEVBQ3hDLDRDQUE0QyxDQUMvQyxDQUFDO1FBQ0YsR0FBRyxDQUFDLEVBQUUsQ0FBNkIsR0FBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNoRCxHQUFHLENBQUMsU0FBUyxDQUNtQixHQUFJLENBQUMsTUFBTSxFQUN2QyxDQUFDLEVBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFDLENBQUMsQ0FDdEMsQ0FBQztRQUNGLEdBQUcsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQzFCLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUNkLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUMifQ==